---
layout: default
title: 토스의 인프라 모니터링
parent: 토스 기술 분석 Toss Tech
nav_order: 2
last_modified_date: 2021-03-07 07:51:00
last_modified_at: 2021-03-07 07:51:00
---

# 토스의 인프라 모니터링
{: .no_toc }

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

이 포스트는 [토스ㅣSLASH 21 - 토스의 서버 인프라 모니터링](https://www.youtube.com/watch?v=rxurfKT2lD8) 유튜브 영상을 참고하여 본인의 의견이 첨가된 내용으로 포스팅을 **재구성한** 글임을 미리 밝혀 둡니다. 만약 토스 관계자분께서 해당 포스팅의 게재를 원치 않으시거나 수정이 필요하다고 판단되면 이메일로 연락 부탁드립니다.

## 개요

토스의 서버 인프라는 **2019년에 대대적인 변화**가 있었는데, 그 당시 컨테이너 기반의 오케스트레이션 시스템으로 **vamp, DC/OS** 기반의 인프라를 사용하였다. DC/OS는 컨테이너 오케스트레이션 엔진이고, vamp는 마이크로 서비스에서 서비스 디스커버리를 담당하는 API Gateway 컴포넌트이다. 하지만 운영 한계를 느껴 엔진을 변경하게 되었다고 소개하고 있다.

이후 **kubernetes, Istio** 기반으로 마이그레이션 하게 되는데, kubernetes는 잘 아시다시피 컨테이너 오케스트레이션이고 Istio는 쿠버네티스 클러스터에서 컨테이너의 연결, 모니터 및 보안을 구성하는 메시 서비스이다.

엔진의 변화 외에도 모니터링 시스템에도 변화가 있었는데, 기존에는 **influxdb, telegraf** 으로 모니터링을 진행했다고 한다. 그러나 엔진을 쿠버네티스로 변경하면서 좀더 친화적인 **prometheus, thanos** 으로 변경하게 된다.

## 매트릭 레이어 3단계 소개

![toss_12.png](/meta/docs/architecture-analysis/toss/toss_12.png)